<!DOCTYPE html>
<html lang="fr" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
	<meta charset="utf-8" />
	<title>Membres</title>
	<ui:include src="/WEB-INF/cssLoader.xhtml" />
	<ui:include src="/WEB-INF/navBar.xhtml" />
</h:head>
<h:body>

	<h:panelGroup layout="block" styleClass="container">
	<h3 class="display-3 font-weight-bold  mt-5 pt-5 text-dark">Liste des membres</h3>
	<hr class="hr-light my-4 w-75"/>
	
		<h:panelGroup layout="block" styleClass="table-wrapper">

			<h:panelGroup layout="block" styleClass="col-sm-5">
				<h2>Administrateur</h2>
			</h:panelGroup>
			<h:dataTable value="#{usersBean.admins}"
						var="user" styleClass="table table-striped table-hover"
						headerClass="" rowClasses="">

						<h:column>
							<f:facet name="header">#</f:facet>
							#{user.id}
						</h:column>

						<h:column>
							<f:facet name="header">Nom</f:facet>
							#{user.lastname} #{user.firstname}
    					</h:column>

						<h:column>
							<f:facet name="header">Email</f:facet>
							#{user.email}		
						</h:column>
						
						<h:column>
							<f:facet name="header">Role</f:facet>
							#{user.role.name}		
						</h:column>
						
						<h:column styleClass="text-right">
							<f:facet name="header">Action</f:facet>
							<h:form>
								<h:commandLink action="#{updateMemberBean.goToUpdate(user.id)}">
									 <i class='fa fa-edit'></i>	
								</h:commandLink>
								
								<h:commandLink action="#{usersBean.deleteUser(user.id)}">
									 <i class='fa fa-trash'></i>	
								</h:commandLink>
							</h:form>
						</h:column>
						
					</h:dataTable>


			<h:panelGroup layout="block" styleClass="col-sm-7">
							<h:form>
								<h:commandLink value="Ajouter un utilisateur" action="#{usersBean.addMember}"
								 styleClass="btn btn-info">
								</h:commandLink>
							</h:form>
			</h:panelGroup>
			
			
			<br/>
			<hr class="hr-light my-4 w-75"/>
			<h:panelGroup layout="block" styleClass="col-sm-5">
				<h2>Comptables</h2>
			</h:panelGroup>
			<h:dataTable value="#{usersBean.accounters}"
						var="user" styleClass="table table-striped table-hover"
						headerClass="" rowClasses="">

						<h:column>
							<f:facet name="header">#</f:facet>
							#{user.id}
						</h:column>

						<h:column>
							<f:facet name="header">Nom</f:facet>
							#{user.lastname} #{user.firstname}
    					</h:column>

						<h:column>
							<f:facet name="header">Email</f:facet>
							#{user.email}		
						</h:column>
						
						<h:column>
							<f:facet name="header">Role</f:facet>
							#{user.role.name}		
						</h:column>
						
						<h:column styleClass="text-right">
							<f:facet name="header">Action</f:facet>
							<h:form>
							<h:commandLink action="#{updateMemberBean.goToUpdate(user.id)}">
									 <i class='fa fa-edit'></i>	
								</h:commandLink>
								
								<h:commandLink action="#{usersBean.deleteUser(user.id)}">
									 <i class='fa fa-trash'></i>	
								</h:commandLink>
							</h:form>
						</h:column>
					</h:dataTable>
			
			
			<br/>
			<hr class="hr-light my-4 w-75"/>
			<h:panelGroup layout="block" styleClass="col-sm-5">
				<h2>Utilisateur</h2>
			</h:panelGroup>
			<h:dataTable value="#{usersBean.members}"
						var="user" styleClass="table table-striped table-hover"
						headerClass="" rowClasses="">

						<h:column>
							<f:facet name="header">#</f:facet>
							#{user.id}
						</h:column>

						<h:column>
							<f:facet name="header">Nom</f:facet>
							#{user.lastname} #{user.firstname}
    					</h:column>

						<h:column>
							<f:facet name="header">Email</f:facet>
							#{user.email}		
						</h:column>
						
						<h:column>
							<f:facet name="header">Role</f:facet>
							#{user.role.name}		
						</h:column>
						
						<h:column styleClass="text-right">
							<f:facet name="header">Action</f:facet>
							<h:form>
								<h:commandLink action="#{updateMemberBean.goToUpdate(user.id)}">
									 <i class='fa fa-edit'></i>	
								</h:commandLink>
								
								<h:commandLink action="#{usersBean.deleteUser(user.id)}">
									 <i class='fa fa-trash'></i>	
								</h:commandLink>
							</h:form>
						</h:column>
					</h:dataTable>
					
				<h:messages globalOnly="true" infoClass="text-success" />				
				<ui:include src="/WEB-INF/footer.xhtml" />
					
		</h:panelGroup>
	</h:panelGroup>
</h:body>
</html>