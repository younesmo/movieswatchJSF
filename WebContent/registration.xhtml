<!DOCTYPE html>
<html lang="fr"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
      		<meta charset="utf-8" />
        <title>Registration</title>
        <ui:include src="/WEB-INF/cssLoader.xhtml" />
        
    </h:head>
    <h:body>
        <div class="view" style="background-image: url('./resources/default/images/background/backgroundConnectionPage.jpg'); background-repeat: no-repeat; background-size: cover; background-position: center center;">  
	<h6 class=" display-3 font-weight-bold white-text mt-5 pt-5"></h6>
	
	<div class="signup-form">
	    <h:form id="form">
			<h2>Inscription</h2>
			
	        <div class="form-group">
	        	<h:inputText id="email" styleClass="form-control" value="#{registrationBean.user.email}" a:placeholder="Email" size="20" maxlength="60" >
	        		   <f:ajax event="blur" render="emailMessage" />
       	     		  	<f:validator validatorId="emailExistValidator" />
	        	</h:inputText>
	        	<h:message id="emailMessage" for="email" errorClass="text-danger"/>
	        </div>
	        
	        <div class="form-group">
	        	 <h:inputText id="nom" a:placeholder="Nom" styleClass="form-control" value="#{registrationBean.user.nom}" size="20" maxlength="20" >
	        	   <f:ajax event="blur" render="nomMessage" />
	        	</h:inputText>
	        	<h:message id="nomMessage" for="nom" errorClass="text-danger" />
	      	</div>
	        
	        
	        <div class="form-group">
	        	 <h:inputText id="prenom" a:placeholder="Prenom" styleClass="form-control" value="#{registrationBean.user.prenom}" size="20" maxlength="20" >
	        	   <f:ajax event="blur" render="prenomMessage" />
	        	</h:inputText>
	        	<h:message id="prenomMessage" for="prenom" errorClass="text-danger" />
	      	</div>
	        
	        <div class="form-group">
	        	<h:inputText id="street" a:placeholder="Rue" styleClass="form-control" value="#{registrationBean.user.ADrue}">
		        	<f:ajax event="blur" render="streetMessage" />
	        	</h:inputText>
     	     	<h:message id="streetMessage" for="street" errorClass="text-danger" />
	       </div>
	        
	        <div class="form-group">
	        	<h:inputText id="cp" styleClass="form-control" value="#{registrationBean.cp.numero}" a:placeholder="Code Postal" size="20" maxlength="60" >
	        		   <f:ajax event="blur" render="cpMessage" />
       	     		  	<f:validator validatorId="cpExistValidator"/>
	        	</h:inputText>
	        	<h:message id="cpMessage" for="cp" errorClass="text-danger"/>
	        </div>
	        
	        
	        <div class="form-group">
	        	<h:inputText id="num" styleClass="form-control" value="#{registrationBean.user.numMobile}" a:placeholder="Telephone">
	        	</h:inputText>
	        </div>
	        
	        <div class="form-group">
	        <h:inputText id="birth" styleClass="form-control datepicker" value="#{registrationBean.user.dateNaissance}" a:placeholder="Date de naissance">
	        	   <f:convertDateTime pattern="yyyy-MM-dd"/>
	        	   <f:ajax event="blur" render="birthMessage" />
	        </h:inputText>
   	        <h:message id="birthMessage" for="birth" errorClass="text-danger"/>
	        </div>
	        
			<div class="form-group">
	        <h:inputSecret id="motdepasse" a:placeholder="Mot de passe" styleClass="form-control" value="#{registrationBean.user.passwd}" binding="#{composantMotDePasse}" 
	        				size="20" maxlength="20" >
	       		 <f:ajax event="blur" execute="motdepasse confirmation" render="motDePasseMessage confirmationMessage" />
	        </h:inputSecret>
	        <h:message id="motDePasseMessage" for="motdepasse" errorClass="text-danger" />
	        </div>
	        
			<div class="form-group">
	            <h:inputSecret id="confirmation" styleClass="form-control" a:placeholder="Confirmation mot de passe" value="#{registrationBean.user.passwd}" size="20" maxlength="20" >
	        		<f:ajax event="blur" execute="motdepasse confirmation" render="motDePasseMessage confirmationMessage" />
        	    	<f:attribute name="composantMotDePasse" value="#{composantMotDePasse}" />
        	    	<f:validator validatorId="passwordConfirmationValidator" />
	        	</h:inputSecret>
	        <h:message id="confirmationMessage" for="confirmation" errorClass="erreur" />
	        </div>
	        
	        
	       <h:messages globalOnly="true" infoClass="info" />
	        
			<div class="form-group">
			 <h:commandButton value="Inscription" styleClass="btn btn-primary btn-lg" action="#{registrationBean.registrateUser}">
	        </h:commandButton>
	        </div>
	        
	        
	    </h:form>
	    
	    <div class="white-text text-center">
			Déjà inscris ?
			<h:link styleClass="white-text" value="Se connecter" outcome = "login" />
		</div>
		
	</div>
</div>
<hr class="hr-light my-4 w-75"></hr>

  <ui:include src="/WEB-INF/footer.xhtml" />

    </h:body>
</html>