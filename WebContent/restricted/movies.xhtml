<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/template.xhtml">

	<ui:define name="title">Films</ui:define>

	<ui:define name="head">
		<style type="text/css">
    .logo {
        width: 5%
    }
     
    .detail {
        width: 95%;
        padding-left: 25px;
    }
     
    .detail td {
        font-size: 24px;
    }
     
    .ui-datascroller .ui-datascroller-item {
        border-bottom: 1px solid #A8A8A8;
        padding: 25px 10px;
        /* with the exported variables from Nova and Luna Themes*/
        border-bottom-color: var(--input-border-color, #A8A8A8);
    }
</style>
	</ui:define>

	<ui:define name="content">
	
		<h:panelGroup rendered="#{sessionScope.currentUser.role.name == 'User' }">
	<h:form> 
	
	
    <p:dataScroller value="#{moviesBean.movies}"  var="movie" chunkSize="10">
        <f:facet name="header">
			Films
        </f:facet>
 
      
          <h:panelGrid columns="2" style="width:100%" columnClasses="logo,detail">
           <h:graphicImage value="#{movie.posterUrl}"
								style="min-height: 130px; max-height: 130px"
								styleClass="card-img-top img-fluid" />
            
            <p:outputPanel>
                <h:panelGrid columns="1" style="width:100%">
                    <h:outputText value="#{msg['title']} :" />
                    <h:outputText value="#{movie.title}" style="font-weight: bold"/>
                    <h:outputText value="#{msg['year']} :" />
                    <h:outputText value="#{movie.productionYear}" style="font-weight: bold"/>
                    <h:commandLink styleClass="nav-link"
									action="#{movieBean.goToMovieDetails}">
									<f:setPropertyActionListener target="#{movieBean.idMovie}" value="#{movie.id}" />																	
									
								</h:commandLink>
								<h:commandLink styleClass="nav-link"
									action="#{movieBean.goToMovieDetails}">
									<f:setPropertyActionListener target="#{movieBean.idMovie}" value="#{movie.id}" />																	
									<i class="fa fa-cart-plus"
										data-toggle="tooltip" data-placement="top" title="Panier"></i>
								</h:commandLink>
								
                </h:panelGrid>
            </p:outputPanel>
        </h:panelGrid>
    </p:dataScroller>
</h:form>

			
		</h:panelGroup>
		
		<h:panelGroup rendered="#{sessionScope.currentUser.role.name == 'Admin' }">

		
		<h:panelGroup layout="block" styleClass="container">
		<h3 class="display-3 font-weight-bold mt-5 pt-5 text-dark">#{msg['movies']}</h3>
		<hr class="hr-light my-4 w-75" />
		
			<h:panelGroup layout="block" styleClass="table-wrapper">


				<h:dataTable value="#{moviesBean.movies}" var="movie"
					styleClass="table table-striped table-hover" headerClass=""
					rowClasses="">

						<h:column>
							<f:facet name="header">#</f:facet>
    						#{movie.id}
    					</h:column>

						<h:column>
							<f:facet name="header">Isan</f:facet>
    						#{movie.numIsan}
    					</h:column>

						<h:column>
							<f:facet name="header">#{msg['title']}</f:facet>
    					#{movie.title}
    					</h:column>

						<h:column>
							<f:facet name="header">#{msg['year']}</f:facet>
    					#{movie.productionYear}
    					</h:column>

						<h:column>
							<f:facet name="header">Action</f:facet>
							<h:form>
							<h:commandLink value="" styleClass="btn btn-sm btn-info" 
							action="#{movieBean.goToMovieDetails}">
							<f:setPropertyActionListener target="#{movieBean.idMovie}" value="#{movie.id}" />								
							
								<i class="fa fa-info-circle"></i>
							</h:commandLink>
							
							<h:commandLink value="" styleClass="btn btn-sm btn-danger" 
							action="#{moviesBean.deleteMovie}">
							<f:setPropertyActionListener target="#{moviesBean.idMovie}" value="#{movie.id}" />								
							
								<i class="fa fa-trash"></i>
							</h:commandLink>
							</h:form>
						</h:column>
				</h:dataTable>

				<h:panelGroup layout="block" styleClass="col-sm-7">
				<h:form>
					<h:commandLink value="#{msg['addMovie']}"
						styleClass="btn btn-primary" action="#{moviesBean.goToAddMovie}">
					</h:commandLink>
				</h:form>
				</h:panelGroup>

				<br />
				<hr class="hr-light my-4 w-75"/>
			</h:panelGroup>
		</h:panelGroup>
	</h:panelGroup>
		<h:outputStylesheet name="css/layout-#{guestPreferences.layout}.css"
			library="barcelona-layout" />
		<h:outputStylesheet name="css/ripple.css" library="barcelona-layout" />
	</ui:define>

</ui:composition>
